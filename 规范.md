# *代码上线规范*
#*TOP*
![流程](https://i.imgur.com/vOemA3V.jpg "流程") 
![](https://i.imgur.com/zNS7XmG.png)
## 一.测试环境代码迭代到预发布环境
<每一步操作遵行记录反馈>

1.测试小组长检查审查功能；

2.提交代码迭代到下一个环境的申请：如下

    公共频道形式
![](https://i.imgur.com/Gbipj6k.jpg)

----------


    邮件形式：
    收件人-项目负责人、主要开发者、产品、预发布环境管理者；

    邮件内容：版本主题、迭代 A to B、版本号以及版本功能内容、发布日期

    开发者提供：OSS以及数据库同步SQL文本（更新内容、标识日期、归档版本信息)changlog

3.预生产环境管理人员根据测试管理者发布的邮件进行确认审核；

4.预生产管理人员进行代码的合并操作；
>>发布申请者在公共频道以及邮件发布更新内容以及项目版本信息
>
![](https://i.imgur.com/Gbipj6k.jpg)

>1.*将数据库表结构从测试环境同步到预生产环境*
>
>2.*将图片存储-base同步到预生产环境图片存储*

>3.*预生产管理者根据规范进行代码发布到环境*

>4.*反馈发布结果到公共频道，并告知测试组进行测试审查*

## 二.预发布环境代码迭代到生产环境
###<每一步操作遵行跟踪记录反馈>
### 正式运营后：此环境在正常情况下 -不- 接受 口头 提出申请发布同步操作，紧急情况可有小组负责人提出、后补充相关申请
    公共频道形式
    日期：项目名称 版本识别
    版本内容
    pre环境 to master环境
    oss/数据库表结构变更SQL文本

----------

    <优先>
    邮件形式：
    收件人-项目负责人、主要开发者、产品、预发布环境管理者；

    邮件内容：版本主题、迭代 A to B、版本号以及版本功能内容、发布日期

    开发者提供：OSS以及数据库同步SQL文本（更新内容、标识日期、归档版本信息)changlog
> 


1. 根据发布计划，以通告的形式在官网首页And公共频道挂出更新通告，更新时间、维持时间范围；

2. 开发者提供OSS以及数据库同步SQL文本（更新内容、标识日期、归档版本信息)changlog;

3. 预先将预发布环境分支代码合并到生产分支；

>3.1-备份数据库-以日期时间格式保存

>3.2-备份线上允许代码-tag

>3.3-备份图片文件.

*4.  发布生产环境代码；

>4.1-更新数据库SQL

>4.2-同步增量更新图片

>4.3-发布master代码

*5. 测试组业务功能检查
>5.1 在测试组以及产品功能验收阶段，建议相关人员留守应急，配合完成业务的上线
  